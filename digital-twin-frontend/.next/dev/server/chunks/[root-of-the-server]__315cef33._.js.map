{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bises/OneDrive/Desktop/digital-twin-team2/digital-twin-frontend/src/app/api/auth/signup/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\n\r\n// Mock user database - In production, use a real database\r\n// Starting with empty array to allow users to sign up freely\r\nlet users: Array<{ id: string; email: string; password: string; name: string }> = [];\r\n\r\n// Simple JWT-like token generator (In production, use proper JWT)\r\nfunction generateToken(userId: string, email: string): string {\r\n  const header = btoa(JSON.stringify({ alg: 'HS256', typ: 'JWT' }));\r\n  const payload = btoa(\r\n    JSON.stringify({\r\n      userId,\r\n      email,\r\n      iat: Math.floor(Date.now() / 1000),\r\n      exp: Math.floor(Date.now() / 1000) + 24 * 60 * 60, // 24 hours\r\n    })\r\n  );\r\n  const signature = btoa(`${header}.${payload}`);\r\n  return `${header}.${payload}.${signature}`;\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json();\r\n    const { email, password, name } = body;\r\n\r\n    // Validation\r\n    if (!email || !password || !name) {\r\n      return NextResponse.json(\r\n        { message: 'Email, password, and name are required' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (password.length < 8) {\r\n      return NextResponse.json(\r\n        { message: 'Password must be at least 8 characters long' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Check if user already exists (In production, query your database)\r\n    const existingUser = users.find((u) => u.email === email);\r\n\r\n    if (existingUser) {\r\n      return NextResponse.json(\r\n        { message: 'User with this email already exists' },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    // Create new user\r\n    const newUser = {\r\n      id: String(users.length + 1),\r\n      email,\r\n      password, // In production, hash the password!\r\n      name,\r\n    };\r\n\r\n    users.push(newUser);\r\n\r\n    // Generate token\r\n    const token = generateToken(newUser.id, newUser.email);\r\n\r\n    // Return success response\r\n    return NextResponse.json(\r\n      {\r\n        message: 'Account created successfully',\r\n        token,\r\n        user: {\r\n          id: newUser.id,\r\n          email: newUser.email,\r\n          name: newUser.name,\r\n        },\r\n      },\r\n      { status: 201 }\r\n    );\r\n  } catch (error) {\r\n    console.error('Signup error:', error);\r\n    return NextResponse.json(\r\n      { message: 'Internal server error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,0DAA0D;AAC1D,6DAA6D;AAC7D,IAAI,QAA8E,EAAE;AAEpF,kEAAkE;AAClE,SAAS,cAAc,MAAc,EAAE,KAAa;IAClD,MAAM,SAAS,KAAK,KAAK,SAAS,CAAC;QAAE,KAAK;QAAS,KAAK;IAAM;IAC9D,MAAM,UAAU,KACd,KAAK,SAAS,CAAC;QACb;QACA;QACA,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;QAC7B,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK,QAAQ,KAAK,KAAK;IACjD;IAEF,MAAM,YAAY,KAAK,GAAG,OAAO,CAAC,EAAE,SAAS;IAC7C,OAAO,GAAG,OAAO,CAAC,EAAE,QAAQ,CAAC,EAAE,WAAW;AAC5C;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG;QAElC,aAAa;QACb,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM;YAChC,OAAO,+KAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAyC,GACpD;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,OAAO,+KAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA8C,GACzD;gBAAE,QAAQ;YAAI;QAElB;QAEA,oEAAoE;QACpE,MAAM,eAAe,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK;QAEnD,IAAI,cAAc;YAChB,OAAO,+KAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAsC,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,kBAAkB;QAClB,MAAM,UAAU;YACd,IAAI,OAAO,MAAM,MAAM,GAAG;YAC1B;YACA;YACA;QACF;QAEA,MAAM,IAAI,CAAC;QAEX,iBAAiB;QACjB,MAAM,QAAQ,cAAc,QAAQ,EAAE,EAAE,QAAQ,KAAK;QAErD,0BAA0B;QAC1B,OAAO,+KAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT;YACA,MAAM;gBACJ,IAAI,QAAQ,EAAE;gBACd,OAAO,QAAQ,KAAK;gBACpB,MAAM,QAAQ,IAAI;YACpB;QACF,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,+KAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAwB,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}