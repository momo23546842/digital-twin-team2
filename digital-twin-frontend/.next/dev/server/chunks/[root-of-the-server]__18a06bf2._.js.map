{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bises/OneDrive/Desktop/digital-twin-team2/digital-twin-frontend/src/lib/auth-db.ts"],"sourcesContent":["// Shared mock user database - In production, use a real database\r\n// This is stored in memory during development\r\nconst usersDB = new Map<string, { id: string; email: string; password: string; name: string }>();\r\n\r\n// Pre-populate with test users for development\r\nusersDB.set('test@example.com', {\r\n  id: 'user_test',\r\n  email: 'test@example.com',\r\n  password: 'password123',\r\n  name: 'Test User',\r\n});\r\n\r\nusersDB.set('demo@example.com', {\r\n  id: 'user_demo',\r\n  email: 'demo@example.com',\r\n  password: 'demo12345',\r\n  name: 'Demo User',\r\n});\r\n\r\nexport const authDatabase = {\r\n  getUserByEmail: (email: string) => {\r\n    console.log('Looking up user:', email);\r\n    console.log('Users in database:', Array.from(usersDB.keys()));\r\n    return usersDB.get(email);\r\n  },\r\n\r\n  createUser: (email: string, password: string, name: string) => {\r\n    const newUser = {\r\n      id: `user_${Date.now()}`,\r\n      email,\r\n      password, // In production, hash the password!\r\n      name,\r\n    };\r\n    usersDB.set(email, newUser);\r\n    console.log('User created:', email);\r\n    console.log('All users now:', Array.from(usersDB.keys()));\r\n    return newUser;\r\n  },\r\n\r\n  userExists: (email: string) => {\r\n    return usersDB.has(email);\r\n  },\r\n\r\n  getAllUsers: () => {\r\n    return Array.from(usersDB.values());\r\n  },\r\n};\r\n"],"names":[],"mappings":";;;;AAAA,iEAAiE;AACjE,8CAA8C;AAC9C,MAAM,UAAU,IAAI;AAEpB,+CAA+C;AAC/C,QAAQ,GAAG,CAAC,oBAAoB;IAC9B,IAAI;IACJ,OAAO;IACP,UAAU;IACV,MAAM;AACR;AAEA,QAAQ,GAAG,CAAC,oBAAoB;IAC9B,IAAI;IACJ,OAAO;IACP,UAAU;IACV,MAAM;AACR;AAEO,MAAM,eAAe;IAC1B,gBAAgB,CAAC;QACf,QAAQ,GAAG,CAAC,oBAAoB;QAChC,QAAQ,GAAG,CAAC,sBAAsB,MAAM,IAAI,CAAC,QAAQ,IAAI;QACzD,OAAO,QAAQ,GAAG,CAAC;IACrB;IAEA,YAAY,CAAC,OAAe,UAAkB;QAC5C,MAAM,UAAU;YACd,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;YACxB;YACA;YACA;QACF;QACA,QAAQ,GAAG,CAAC,OAAO;QACnB,QAAQ,GAAG,CAAC,iBAAiB;QAC7B,QAAQ,GAAG,CAAC,kBAAkB,MAAM,IAAI,CAAC,QAAQ,IAAI;QACrD,OAAO;IACT;IAEA,YAAY,CAAC;QACX,OAAO,QAAQ,GAAG,CAAC;IACrB;IAEA,aAAa;QACX,OAAO,MAAM,IAAI,CAAC,QAAQ,MAAM;IAClC;AACF"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bises/OneDrive/Desktop/digital-twin-team2/digital-twin-frontend/src/app/api/auth/signup/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { authDatabase } from '@/lib/auth-db';\r\n\r\n// Simple JWT-like token generator (In production, use proper JWT)\r\nfunction generateToken(userId: string, email: string): string {\r\n  const header = btoa(JSON.stringify({ alg: 'HS256', typ: 'JWT' }));\r\n  const payload = btoa(\r\n    JSON.stringify({\r\n      userId,\r\n      email,\r\n      iat: Math.floor(Date.now() / 1000),\r\n      exp: Math.floor(Date.now() / 1000) + 24 * 60 * 60, // 24 hours\r\n    })\r\n  );\r\n  const signature = btoa(`${header}.${payload}`);\r\n  return `${header}.${payload}.${signature}`;\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json();\r\n    const { email, password, name } = body;\r\n\r\n    // Validation\r\n    if (!email || !password || !name) {\r\n      return NextResponse.json(\r\n        { message: 'Email, password, and name are required' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (password.length < 8) {\r\n      return NextResponse.json(\r\n        { message: 'Password must be at least 8 characters long' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Check if user already exists\r\n    if (authDatabase.userExists(email)) {\r\n      return NextResponse.json(\r\n        { message: 'User with this email already exists' },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    // Create new user\r\n    const newUser = authDatabase.createUser(email, password, name);\r\n\r\n    // Generate token\r\n    const token = generateToken(newUser.id, newUser.email);\r\n\r\n    // Create response with token in cookie\r\n    const response = NextResponse.json(\r\n      {\r\n        message: 'Account created successfully',\r\n        token,\r\n        user: {\r\n          id: newUser.id,\r\n          email: newUser.email,\r\n          name: newUser.name,\r\n        },\r\n      },\r\n      { status: 201 }\r\n    );\r\n\r\n    // Set auth token in cookie\r\n    response.cookies.set('auth_token', token, {\r\n      httpOnly: false,\r\n      secure: process.env.NODE_ENV === 'production',\r\n      sameSite: 'lax',\r\n      maxAge: 24 * 60 * 60, // 24 hours\r\n    });\r\n\r\n    return response;\r\n  } catch (error) {\r\n    console.error('Signup error:', error);\r\n    return NextResponse.json(\r\n      { message: 'Internal server error' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// Export for debugging/testing\r\nexport function GET() {\r\n  return NextResponse.json({\r\n    message: 'This endpoint accepts POST requests only',\r\n    users: authDatabase.getAllUsers(),\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,kEAAkE;AAClE,SAAS,cAAc,MAAc,EAAE,KAAa;IAClD,MAAM,SAAS,KAAK,KAAK,SAAS,CAAC;QAAE,KAAK;QAAS,KAAK;IAAM;IAC9D,MAAM,UAAU,KACd,KAAK,SAAS,CAAC;QACb;QACA;QACA,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;QAC7B,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK,QAAQ,KAAK,KAAK;IACjD;IAEF,MAAM,YAAY,KAAK,GAAG,OAAO,CAAC,EAAE,SAAS;IAC7C,OAAO,GAAG,OAAO,CAAC,EAAE,QAAQ,CAAC,EAAE,WAAW;AAC5C;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG;QAElC,aAAa;QACb,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM;YAChC,OAAO,+KAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAyC,GACpD;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,OAAO,+KAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA8C,GACzD;gBAAE,QAAQ;YAAI;QAElB;QAEA,+BAA+B;QAC/B,IAAI,yKAAY,CAAC,UAAU,CAAC,QAAQ;YAClC,OAAO,+KAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAsC,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,kBAAkB;QAClB,MAAM,UAAU,yKAAY,CAAC,UAAU,CAAC,OAAO,UAAU;QAEzD,iBAAiB;QACjB,MAAM,QAAQ,cAAc,QAAQ,EAAE,EAAE,QAAQ,KAAK;QAErD,uCAAuC;QACvC,MAAM,WAAW,+KAAY,CAAC,IAAI,CAChC;YACE,SAAS;YACT;YACA,MAAM;gBACJ,IAAI,QAAQ,EAAE;gBACd,OAAO,QAAQ,KAAK;gBACpB,MAAM,QAAQ,IAAI;YACpB;QACF,GACA;YAAE,QAAQ;QAAI;QAGhB,2BAA2B;QAC3B,SAAS,OAAO,CAAC,GAAG,CAAC,cAAc,OAAO;YACxC,UAAU;YACV,QAAQ,oDAAyB;YACjC,UAAU;YACV,QAAQ,KAAK,KAAK;QACpB;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,+KAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAwB,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,SAAS;IACd,OAAO,+KAAY,CAAC,IAAI,CAAC;QACvB,SAAS;QACT,OAAO,yKAAY,CAAC,WAAW;IACjC;AACF"}}]
}